{"version":3,"sources":["components/ContextMenu.jsx","hooks/useContextMenu.js","components/Node.jsx","pages/Playground.jsx","App.jsx","index.js"],"names":["contextMenuStyles","cursor","display","width","height","justifyContent","alignItems","ContextMenu","props","useState","contextMenu","setContextMenu","e","preventDefault","stopPropagation","mouseX","clientX","mouseY","clientY","useContextMenu","handleContextMenu","handleClose","Box","sx","onContextMenu","children","Menu","open","onClose","anchorReference","anchorPosition","top","left","undefined","contextMenuItems","map","item","index","MenuItem","onMouseDown","handleClick","text","regularNodeStyles","borderRadius","borderColor","border","boxSizing","backgroundColor","acceptingNodeStyles","entryNodeStyles","invisibleNodeStyles","margin","Node","nodeRef","useRef","updateXarrow","useXarrow","bounds","position","node","onStop","data","updateNode","x","y","onDrag","onClick","isStarting","ref","id","isAccepting","label","Typography","playgroundStyles","minWidth","padding","arrowStyles","color","strokeWidth","Playground","nodes","setNodes","transitions","setTransitions","newTransition","setNewTransition","addNode","length","start","end","newNode","prevState","newNodes","Grid","nodeGrid","nodeContextMenuItems","value","startAddingTransition","oldNode","filter","deleteNode","handleNodeClick","transitionGrid","transition","Container","appStyles","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.da1bb623.chunk.js","sourcesContent":["import React from 'react';\n\nimport MenuItem from '@mui/material/MenuItem';\nimport { useContextMenu } from '../hooks';\nimport { Menu } from '@mui/material';\nimport { Box } from '@mui/system';\n\nconst contextMenuStyles = {\n  cursor: 'context-menu',\n  display: 'flex',\n  width: '100%',\n  height: '100%',\n  justifyContent: 'center',\n  alignItems: 'center',\n};\n\nexport const ContextMenu = (props) => {\n  const [contextMenu, handleContextMenu, handleClose] = useContextMenu();\n\n  return (\n    <Box sx={contextMenuStyles} onContextMenu={handleContextMenu}>\n      {props.children}\n\n      <Menu\n        open={contextMenu !== null}\n        onClose={handleClose}\n        anchorReference='anchorPosition'\n        anchorPosition={\n          contextMenu !== null\n            ? { top: contextMenu.mouseY, left: contextMenu.mouseX }\n            : undefined\n        }\n      >\n        {props.contextMenuItems?.map((item, index) => (\n          <MenuItem\n            key={`menuItem-${index}`}\n            onMouseDown={(e) => {\n              item.handleClick(e);\n              handleClose();\n            }}\n          >\n            {item.text}\n          </MenuItem>\n        ))}\n      </Menu>\n    </Box>\n  );\n};\n","import { useState } from 'react';\n\nexport const useContextMenu = () => {\n  const [contextMenu, setContextMenu] = useState(null);\n\n  const handleContextMenu = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    setContextMenu(\n      contextMenu === null\n        ? { mouseX: e.clientX - 2, mouseY: e.clientY - 4 }\n        : null,\n    );\n  };\n\n  const handleClose = () => {\n    setContextMenu(null);\n  };\n\n  return [contextMenu, handleContextMenu, handleClose];\n};\n","import React, { useRef } from 'react';\n\nimport { Typography } from '@mui/material';\nimport { Box } from '@mui/system';\nimport Draggable from 'react-draggable';\nimport { useXarrow } from 'react-xarrows';\n\nimport { ContextMenu } from './ContextMenu';\n\nconst regularNodeStyles = {\n  display: 'flex',\n  borderRadius: '50%',\n  borderColor: 'grey.500',\n  border: 1,\n  justifyContent: 'center',\n  alignItems: 'center',\n  width: '3em',\n  boxSizing: 'border-box',\n  height: '3em',\n  backgroundColor: 'white',\n};\n\nconst acceptingNodeStyles = {\n  border: '4px double black',\n};\n\nconst entryNodeStyles = {\n  display: 'flex',\n  justifyContent: 'center',\n  boxSizing: 'border-box',\n  width: '100px',\n  alignItems: 'center',\n};\n\nconst invisibleNodeStyles = {\n  display: 'flex',\n  margin: '0 24px 0 0',\n};\n\nexport const Node = (props) => {\n  const nodeRef = useRef(null);\n  const updateXarrow = useXarrow();\n\n  const handleDrag = (e) => {\n    updateXarrow(e);\n  };\n\n  const handleStop = (e, data) => {\n    updateXarrow(e);\n    props.updateNode(props.index, {\n      ...props.node,\n      position: { x: data.x, y: data.y },\n    });\n  };\n\n  const handleClick = () => {\n    props.onClick();\n  };\n\n  return (\n    <Draggable\n      nodeRef={nodeRef}\n      bounds={'parent'}\n      position={props.node.position}\n      onStop={handleStop}\n      onDrag={handleDrag}\n      onMouseDown={handleClick}\n    >\n      {props.node.isStarting ? (\n        <Box ref={nodeRef} sx={entryNodeStyles}>\n          <Box sx={invisibleNodeStyles} id={'entryNode'} />\n          <Box\n            sx={\n              props.node.isAccepting\n                ? { ...regularNodeStyles, ...acceptingNodeStyles }\n                : regularNodeStyles\n            }\n            id={props.node.label}\n          >\n            <ContextMenu contextMenuItems={props.contextMenuItems}>\n              <Typography>{props.node.label}</Typography>\n            </ContextMenu>\n          </Box>\n        </Box>\n      ) : (\n        <Box\n          ref={nodeRef}\n          id={props.node.label}\n          sx={\n            props.node.isAccepting\n              ? { ...regularNodeStyles, ...acceptingNodeStyles }\n              : regularNodeStyles\n          }\n        >\n          <ContextMenu contextMenuItems={props.contextMenuItems}>\n            <Typography>{props.node.label}</Typography>\n          </ContextMenu>\n        </Box>\n      )}\n    </Draggable>\n  );\n};\n","import React, { useState } from 'react';\n\nimport { Container } from '@mui/material';\nimport Xarrow, { Xwrapper } from 'react-xarrows';\n\nimport { Node, ContextMenu } from '../components';\n\nconst playgroundStyles = {\n  height: '100%',\n  width: '100%',\n  minWidth: '100vw',\n  boxSizing: 'border-box',\n  padding: '24px',\n};\n\nconst arrowStyles = {\n  color: 'black',\n  strokeWidth: 2,\n};\n\nexport const Playground = (props) => {\n  const [nodes, setNodes] = useState([]);\n  const [transitions, setTransitions] = useState([]);\n  const [newTransition, setNewTransition] = useState(null);\n\n  const addFirstNode = (e) => {\n    const newNode = {\n      label: 'S0',\n      isStarting: true,\n      isAccepting: false,\n      position: { x: 0, y: 0 },\n    };\n\n    const newTransition = {\n      start: 'entryNode',\n      end: 'S0',\n    };\n\n    setNodes([newNode]);\n    setTransitions([newTransition]);\n  };\n\n  const addNode = (e) => {\n    // const nodeX = e.clientX - e.target.offsetLeft;\n    // const nodeY = e.clientY - e.target.offsetTop;\n\n    if (nodes.length === 0) {\n      addFirstNode(e);\n      return;\n    }\n\n    const newNode = {\n      label: `S${nodes.length}`,\n      isAccepting: false,\n      position: { x: 0, y: 0 },\n    };\n\n    setNodes((prevState) => [...prevState, newNode]);\n  };\n\n  const updateNode = (index, node) => {\n    const newNodes = [...nodes];\n    newNodes[index] = node;\n    setNodes(newNodes);\n  };\n\n  const deleteNode = (oldNode) => {\n    const newNodes = nodes.filter((node) => node.label !== oldNode.label);\n    setNodes(newNodes);\n  };\n\n  const handleNodeClick = (node) => {\n    if (!newTransition) {\n      return;\n    }\n\n    setNewTransition((prevState) => ({ ...prevState, end: node.label }));\n  };\n\n  const startAddingTransition = (node) => {\n    setNewTransition({\n      start: node.label,\n      end: null,\n      value: 0,\n    });\n  };\n\n  const Grid = () => {\n    const nodeGrid = nodes.map((node, index) => {\n      const typeContextMenuItem = node.isAccepting\n        ? {\n            text: 'Make Non-accepting State',\n            handleClick: () =>\n              updateNode(index, { ...node, isAccepting: false }),\n          }\n        : {\n            text: 'Make Accepting State',\n            handleClick: () =>\n              updateNode(index, { ...node, isAccepting: true }),\n          };\n\n      const nodeContextMenuItems = [\n        typeContextMenuItem,\n        {\n          text: 'Add Transition',\n          handleClick: () => startAddingTransition(node),\n        },\n        {\n          text: 'Delete',\n          handleClick: () => deleteNode(node),\n        },\n      ];\n\n      return (\n        <Node\n          key={`${node.label}-${index}`}\n          updateNode={updateNode}\n          onClick={() => handleNodeClick(node)}\n          contextMenuItems={nodeContextMenuItems}\n          index={index}\n          node={node}\n        />\n      );\n    });\n\n    const transitionGrid = transitions.map((transition, index) => (\n      <Xarrow\n        key={`${transition.start}-${transition.end}-${index}`}\n        {...transition}\n        {...arrowStyles}\n      />\n    ));\n\n    return [...nodeGrid, ...transitionGrid];\n  };\n\n  const contextMenuItems = [\n    {\n      text: 'Add State',\n      handleClick: (e) => addNode(e),\n    },\n  ];\n\n  return (\n    <ContextMenu contextMenuItems={contextMenuItems}>\n      <Container sx={playgroundStyles}>\n        <Xwrapper>\n          <Grid />\n        </Xwrapper>\n      </Container>\n    </ContextMenu>\n  );\n};\n","import { Box } from '@mui/system';\nimport React from 'react';\nimport { Playground } from './pages';\n\nconst appStyles = {\n  display: 'flex',\n  height: '100%',\n};\n\nexport const App = () => {\n  return (\n    <Box sx={appStyles}>\n      <Playground />\n    </Box>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}